{% extends 'template.html.twig' %}

{% block title %}Crear Facturas{% endblock %}

{% block header %}
 <header id="topbar" class="ph10">

             <div class="topbar-left">
            <ol class="breadcrumb">
              <li class="crumb-active"><a href="{{ path('facturas_index') }}">Facturas</a></li>                            
              <li class="crumb-trail">Nueva Factura</li>
            </ol>
          </div>
          
        </header>
         <header id="topbar" class="ph10">
          <div class="topbar-left">
            <ul class="nav nav-list nav-list-topbar pull-left">
              <li class="active"><a href="{{ path('facturas_index') }}">Historico Factura</a></li>
              
            </ul>
          </div>
         
        </header>
<div class="content-header">
                <h2><b class="text-primary">Facturaci√≥n</b>
                </h2>
              
              </div>


{% endblock %}

{% block body %}
    

    {{ include('facturas/_form.html.twig') }}


{% endblock %}


{% block addscript %}



<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>


<script type="text/javascript">
      jQuery(document).ready(function (){



          $( ".ingresar" ).click(function() {
    var t = $('.footable').DataTable();

            var productos =  $(".producto").val();
            var cantidad =  $(".cantidad").val();
            var precio = $(".precio").val();
            var total = $(".total").val();
            var promocion = $(".promocion").val();
            var comentarios = $(".comentarios").val();

                   t.row.add( [
                    $(".producto option:selected").text()+"<input type='hidden' value='"+productos+"' name='productos[]'>",
                    $(".cantidad").val()+"<input type='hidden' value='"+cantidad+"' name='cantidad[]'>",
                    $(".precio").val()+"<input type='hidden' value='"+precio+"' name='precio[]'>",
                    $(".total").val()+"<input type='hidden' value='"+total+"' name='total[]'>",
                    $(".promocion").val()+"<input type='hidden' value='"+promocion+"' name='promocion[]'>",
                    $(".comentarios").val()+"<input type='hidden' value='"+comentarios+"' name='comentarios[]'>"
                  ] ).draw( false );
          });


          var table = $('.footable').DataTable();
 
    $('.footable tbody').on( 'click', 'tr', function () {
        if ( $(this).hasClass('selected') ) {
            $(this).removeClass('selected');
        }
        else {
            table.$('tr.selected').removeClass('selected');
            $(this).addClass('selected');

            var btn = this;
            $tr = $(this).closest('tr');
            var data = table.row($tr).data();
            //var id = $tr.find("#idcuenta").val();
            //console.log(id);
        //    var pathname = getAbsolutePath();   

            window.location.href = "edit/"+id;
    
          
        }
    } );
      });

</script>
{% endblock %}
